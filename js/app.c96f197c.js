(function(){"use strict";var t={2207:function(t,e,o){var s=o(5130),n=o(6768);const l={class:"app container"},r=(0,n.Lk)("h1",null,"Страница с постами",-1),a={class:"app__btns"},i={key:1},u={ref:"observer",class:"observer"};function c(t,e,o,s,c,d){const p=(0,n.g2)("my-input"),h=(0,n.g2)("my-button"),m=(0,n.g2)("my-select"),v=(0,n.g2)("post-form"),f=(0,n.g2)("my-dialog"),g=(0,n.g2)("post-list");return(0,n.uX)(),(0,n.CE)("div",l,[r,(0,n.bF)(p,{modelValue:c.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=t=>c.searchQuery=t),placeholder:"Поиск..."},null,8,["modelValue"]),(0,n.Lk)("div",a,[(0,n.bF)(h,{class:"btn",onClick:d.showDialog},{default:(0,n.k6)((()=>[(0,n.eW)("Создать пост")])),_:1},8,["onClick"]),(0,n.bF)(m,{modelValue:c.selectedSort,"onUpdate:modelValue":e[1]||(e[1]=t=>c.selectedSort=t),options:c.sortOptions},null,8,["modelValue","options"])]),(0,n.bF)(f,{show:c.dialogVisible,"onUpdate:show":e[2]||(e[2]=t=>c.dialogVisible=t)},{default:(0,n.k6)((()=>[(0,n.bF)(v,{onCreate:d.createPost},null,8,["onCreate"])])),_:1},8,["show"]),c.isPostsLoading?((0,n.uX)(),(0,n.CE)("div",i,"Идет загрузка...")):((0,n.uX)(),(0,n.Wv)(g,{key:0,posts:d.sortedAndSearchedPosts,onRemove:d.removePost},null,8,["posts","onRemove"])),(0,n.Lk)("div",u,null,512)])}o(4114);const d=(0,n.Lk)("h4",null,"Создание поста",-1);function p(t,e,o,l,r,a){const i=(0,n.g2)("my-input"),u=(0,n.g2)("my-button");return(0,n.uX)(),(0,n.CE)("form",{onSubmit:e[2]||(e[2]=(0,s.D$)((()=>{}),["prevent"]))},[d,(0,n.bF)(i,{modelValue:r.post.title,"onUpdate:modelValue":e[0]||(e[0]=t=>r.post.title=t),type:"text",placeholder:"Название"},null,8,["modelValue"]),(0,n.bF)(i,{modelValue:r.post.body,"onUpdate:modelValue":e[1]||(e[1]=t=>r.post.body=t),type:"text",placeholder:"Описание"},null,8,["modelValue"]),(0,n.bF)(u,{class:"btn",onClick:a.createPost},{default:(0,n.k6)((()=>[(0,n.eW)("Создать")])),_:1},8,["onClick"])],32)}var h={data(){return{post:{title:"",body:""}}},methods:{createPost(){this.post.id=Date.now(),this.$emit("create",this.post),this.post={title:"",body:""}}}},m=o(1241);const v=(0,m.A)(h,[["render",p]]);var f=v;const g=t=>((0,n.Qi)("data-v-2ee8a6c4"),t=t(),(0,n.jt)(),t),y={key:0},b=g((()=>(0,n.Lk)("h3",null,"Список постов",-1))),k={key:1,class:"message"};function P(t,e,o,l,r,a){const i=(0,n.g2)("post-item");return o.posts.length>0?((0,n.uX)(),(0,n.CE)("div",y,[b,(0,n.bF)(s.F,{name:"post-list"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.posts,(e=>((0,n.uX)(),(0,n.Wv)(i,{post:e,key:e.id,onRemove:o=>t.$emit("remove",e)},null,8,["post","onRemove"])))),128))])),_:1})])):((0,n.uX)(),(0,n.CE)("h2",k," Список постов пуст "))}var _=o(4232);const C={class:"post"},w=(0,n.Lk)("strong",null,"Название:",-1),V=(0,n.Lk)("strong",null,"Описание:",-1),L={class:"post__btn"};function O(t,e,o,s,l,r){const a=(0,n.g2)("my-button");return(0,n.uX)(),(0,n.CE)("div",C,[(0,n.Lk)("div",null,[(0,n.Lk)("div",null,(0,_.v_)(o.post.id),1),(0,n.Lk)("div",null,[w,(0,n.eW)(" "+(0,_.v_)(o.post.title),1)]),(0,n.Lk)("div",null,[V,(0,n.eW)(" "+(0,_.v_)(o.post.body),1)])]),(0,n.Lk)("div",L,[(0,n.bF)(a,{onClick:e[0]||(e[0]=e=>t.$emit("remove",o.post))},{default:(0,n.k6)((()=>[(0,n.eW)("Удалить")])),_:1})])])}var E={props:{post:{type:Object,required:!0}}};const F=(0,m.A)(E,[["render",O]]);var S=F,X={components:{PostItem:S},props:{posts:{Type:Array,required:!0}}};const j=(0,m.A)(X,[["render",P],["__scopeId","data-v-2ee8a6c4"]]);var A=j;const $={class:"btn"};function x(t,e,o,s,l,r){return(0,n.uX)(),(0,n.CE)("button",$,[(0,n.RG)(t.$slots,"default")])}var I={name:"my-button"};const M=(0,m.A)(I,[["render",x]]);var D=M;const W=["value"];function Q(t,e,o,s,l,r){return(0,n.uX)(),(0,n.CE)("input",{value:o.modelValue,onInput:e[0]||(e[0]=(...t)=>r.updateInput&&r.updateInput(...t)),class:"input",type:"text"},null,40,W)}var R={name:"my-input",props:{modelValue:[String,Number]},methods:{updateInput(t){this.$emit("update:modelValue",t.target.value)}}};const T=(0,m.A)(R,[["render",Q]]);var U=T,q=o(4373),B={components:{PostList:A,PostForm:f,MyButton:D,MyInput:U},data(){return{posts:[],dialogVisible:!1,isPostsLoading:!1,selectedSort:"",searchQuery:"",page:1,limit:10,totalPages:0,sortOptions:[{value:"title",name:"По названию"},{value:"body",name:"По содержимому"}]}},methods:{createPost(t){this.posts.push(t),this.dialogVisible=!1},removePost(t){this.posts=this.posts.filter((e=>e.id!==t.id)),console.log(t)},showDialog(){this.dialogVisible=!0},async fetchPosts(){try{this.isPostsLoading=!0;const t=await q.A.get("https://jsonplaceholder.typicode.com/posts",{params:{_page:this.page,_limit:this.limit}});this.totalPages=Math.ceil(t.headers["x-total-count"]/this.limit),this.posts=t.data}catch(t){console.log("Error fetching posts: ",t)}finally{this.isPostsLoading=!1}},async loadMorePosts(){try{this.page+=1;const t=await q.A.get("https://jsonplaceholder.typicode.com/posts",{params:{_page:this.page,_limit:this.limit}});this.totalPages=Math.ceil(t.headers["x-total-count"]/this.limit),this.posts=[...this.posts,...t.data]}catch(t){console.log("Error fetching posts: ",t)}}},mounted(){this.fetchPosts();const t={rootMargin:"0px",threshold:1},e=(t,e)=>{t[0].isIntersecting&&this.page<this.totalPages&&(console.log(e),this.loadMorePosts())},o=new IntersectionObserver(e,t);o.observe(this.$refs.observer)},computed:{sortedPosts(){return[...this.posts].sort(((t,e)=>t[this.selectedSort]?.localeCompare(e[this.selectedSort])))},sortedAndSearchedPosts(){return this.sortedPosts.filter((t=>t.title.toLowerCase().includes(this.searchQuery.toLowerCase())))}},watch:{}};const G=(0,m.A)(B,[["render",c]]);var K=G;function N(t,e,o,l,r,a){return o.show?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"dialog",onClick:e[1]||(e[1]=(0,s.D$)(((...t)=>a.hideDialog&&a.hideDialog(...t)),["stop"]))},[(0,n.Lk)("div",{onClick:e[0]||(e[0]=(0,s.D$)((()=>{}),["stop"])),class:"dialog__content"},[(0,n.RG)(t.$slots,"default")])])):(0,n.Q3)("",!0)}var z={name:"my-dialog",props:{show:{type:Boolean,default:!1}},methods:{hideDialog(){this.$emit("update:show",!1)}}};const H=(0,m.A)(z,[["render",N]]);var J=H;const Y=["value"],Z=(0,n.Lk)("option",{disabled:"",value:""},"Выбирете из списка",-1),tt=["value"];function et(t,e,o,s,l,r){return(0,n.uX)(),(0,n.CE)("select",{class:"select",value:o.modelValue,onChange:e[0]||(e[0]=(...t)=>r.changeOption&&r.changeOption(...t))},[Z,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.options,(t=>((0,n.uX)(),(0,n.CE)("option",{key:t.value,value:t.value},(0,_.v_)(t.name),9,tt)))),128))],40,Y)}var ot={name:"my-select",props:{modelValue:{type:String},options:{type:Array,default:()=>[]}},methods:{changeOption(t){this.$emit("update:modelValue",t.target.value)}}};const st=(0,m.A)(ot,[["render",et]]);var nt=st,lt=[D,U,J,nt];console.log(lt);const rt=(0,s.Ef)(K);lt.forEach((t=>{rt.component(t.name,t)})),rt.mount("#app")}},e={};function o(s){var n=e[s];if(void 0!==n)return n.exports;var l=e[s]={exports:{}};return t[s].call(l.exports,l,l.exports,o),l.exports}o.m=t,function(){var t=[];o.O=function(e,s,n,l){if(!s){var r=1/0;for(c=0;c<t.length;c++){s=t[c][0],n=t[c][1],l=t[c][2];for(var a=!0,i=0;i<s.length;i++)(!1&l||r>=l)&&Object.keys(o.O).every((function(t){return o.O[t](s[i])}))?s.splice(i--,1):(a=!1,l<r&&(r=l));if(a){t.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}l=l||0;for(var c=t.length;c>0&&t[c-1][2]>l;c--)t[c]=t[c-1];t[c]=[s,n,l]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,l,r=s[0],a=s[1],i=s[2],u=0;if(r.some((function(e){return 0!==t[e]}))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(i)var c=i(o)}for(e&&e(s);u<r.length;u++)l=r[u],o.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return o.O(c)},s=self["webpackChunkvue_project_two"]=self["webpackChunkvue_project_two"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],(function(){return o(2207)}));s=o.O(s)})();
//# sourceMappingURL=app.c96f197c.js.map